<!DOCTYPE html>
<html lang="ko">
<head>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ì–´ë–»ê²Œ?">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3299/3299954.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì–´ë–»ê²Œ? ğŸš® - ë¶„ë¦¬ìˆ˜ê±° ê°€ì´ë“œ</title>
    <style>
        /* [ë””ìì¸ ì‹œìŠ¤í…œ & ê¸°ë³¸ ì„¤ì •] */
        :root {
            --bg-color: #FFFFFF;
            --main-green: #2E8B57; /* ì•ˆì •ê°ì„ ì£¼ëŠ” ì´ˆë¡ (SeaGreen) */
            --soft-green: #90EE90; /* ì—°ë‘ìƒ‰ (LightGreen) */
            --pastel-gray: #F0F2F0; /* íšŒë°±ìƒ‰ ë°°ê²½ */
            --text-gray: #555555;
            --highlight-green: #3CB371; /* í…ìŠ¤íŠ¸ ê°•ì¡° ì´ˆë¡ */
            --btn-gray: #E0E0E0;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            overflow: hidden; /* ì•„ì´íŒ¨ë“œ ì•± ëŠë‚Œ */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* [ì•„ì´íŒ¨ë“œ 1920x1080 ë¹„ìœ¨ ì»¨í…Œì´ë„ˆ] */
        #app-container {
            width: 1920px; /* ì‹¤ì œ ë¹„ìœ¨ */
            height: 1080px;
            max-width: 100vw; /* í™”ë©´ì— ë§ì¶¤ */
            max-height: 100vh;
            position: relative;
            background-color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* [í—¤ë”: ë¡œê³ ] */
        header {
            width: 100%;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center; /* ì´ˆê¸°: ì¤‘ì•™ ì •ë ¬ */
            padding: 0;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 10;
            /* ë¡œê³  ì´ë™ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ íŠ¸ëœì§€ì…˜ ì¶”ê°€ */
            transition: all 0.5s ease-in-out; 
        }

        /* ë¡œê³ ê°€ ì™¼ìª½ìœ¼ë¡œ ì´ë™í–ˆì„ ë•Œì˜ ìƒíƒœ */
        header.logo-moved {
            justify-content: flex-start; /* ì™¼ìª½ ì •ë ¬ */
            padding-left: 50px; /* ì™¼ìª½ íŒ¨ë”© ì¶”ê°€ */
        }

        .logo-box {
            background: linear-gradient(135deg, var(--soft-green), var(--main-green));
            padding: 15px 30px;
            border-radius: 20px;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .logo-box:active {
            transform: scale(0.95);
        }

        /* [ë©”ì¸ ì˜ì—­ ê³µí†µ] */
        .content-area {
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transition: opacity 0.5s ease;
        }

        /* 1. ì—…ë¡œë“œ í™”ë©´ */
        .upload-zone {
            width: 60%;
            height: 50%;
            border: 3px dashed var(--soft-green);
            border-radius: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #FAFAFA;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-zone:hover {
            background-color: #F0FFF0;
            border-color: var(--main-green);
        }

        .upload-text {
            font-size: 1.5rem;
            color: var(--text-gray);
            margin-top: 20px;
        }

        /* ìˆ¨ê²¨ì§„ íŒŒì¼ ì¸í’‹ */
        #file-input {
            display: none;
        }

        /* 2. ê°ì§€ ë° ê²°ê³¼ í…ìŠ¤íŠ¸ */
        #status-text {
            font-size: 3rem;
            font-weight: bold;
            color: #888; /* íŒŒìŠ¤í†¤ íšŒë°±ìƒ‰ ëŠë‚Œ */
            line-height: 1.5;
            min-height: 200px; /* í…ìŠ¤íŠ¸ ë³€ê²½ ì‹œ ë ˆì´ì•„ì›ƒ í”ë“¤ë¦¼ ë°©ì§€ */
        }

        .highlight-text {
            color: var(--highlight-green);
        }

        /* 3. ì„ íƒ ë²„íŠ¼ (ë°©ë²• vs ì˜ìƒ) */
        .button-group {
            display: none; /* ì´ˆê¸°ì—” ìˆ¨ê¹€ */
            margin-top: 50px;
            margin-bottom: 20px; /* ìƒì„¸ ë·°ì™€ ê°„ê²© í™•ë³´ */
            gap: 40px;
            z-index: 5; /* ìƒì„¸ ë·° ìœ„ì— ë³´ì´ë„ë¡ */
        }

        .action-btn {
            background-color: var(--pastel-gray); /* ì˜…ì€ íšŒìƒ‰ */
            color: black;
            font-size: 1.8rem;
            padding: 20px 60px;
            border-radius: 15px;
            border: none;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.1s, background-color 0.2s;
        }
        
        /* í™œì„±í™”ëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .action-btn.active {
            background-color: var(--main-green); /* í™œì„±í™” ì‹œ ì§„í•œ ì´ˆë¡ */
            color: white;
            box-shadow: 0 5px 15px rgba(46, 139, 87, 0.4);
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        /* 4. ìƒì„¸ ì»¨í…ì¸  (ë°©ë²•/ì˜ìƒ) */
        #detail-view {
            width: 80%;
            height: 60%;
            background: white;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 30px; 
            box-sizing: border-box;
            overflow-y: auto;
        }
        
        /* 4-1. 2x2 ê²©ì ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2ì—´ */
            grid-template-rows: repeat(2, 1fr); /* 2í–‰ */
            gap: 30px; /* ê²©ì ì‚¬ì´ ê°„ê²© */
            width: 90%;
            max-width: 1200px;
            margin: 30px auto;
        }

        .step-box {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: left;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--main-green);
            margin-top: 5px;
            margin-bottom: 10px;
        }
        
        /* ë‹¨ê³„ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ (ë°°ê²½ ì´ë¯¸ì§€ ì‚¬ìš©) */
        .step-img {
            width: 100%;
            height: 180px; 
            background-color: #ddd; 
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            background-size: cover; 
            background-position: center;
            background-repeat: no-repeat;
        }

        /* 4-2. ì˜ìƒ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .video-box {
            width: 90%;
            height: 90%;
            max-width: 1000px;
            max-height: 560px; /* 16:9 ë¹„ìœ¨ ìœ ì§€ */
            margin: 0 auto;
            background-color: black;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            border-radius: 20px;
        }
        
        .video-iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 20px;
        }

        /* 5. ë˜ë‹¤ì‹œ ë²„íŠ¼ (í•˜ë‹¨) */
        .reset-bar {
            width: 100%;
            height: 80px;
            display: none; /* ì´ˆê¸°ì—” ìˆ¨ê¹€ */
            justify-content: center;
            position: absolute;
            bottom: 30px;
        }

        .reset-btn {
            background-color: #808080; /* íšŒìƒ‰ */
            color: white; /* í•˜ì–€ìƒ‰ */
            font-size: 1.5rem;
            padding: 15px 50px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .reset-btn:active {
            transform: scale(0.9);
        }

        /* ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ (ì¤‘ì•™ ë°°ì¹˜ìš©) */
        #preview-img {
            max-width: 300px;
            max-height: 300px;
            border-radius: 20px;
            margin-bottom: 30px;
            display: none;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

    </style>
</head>
<body>

    <div id="app-container">
        <header id="app-header">
            <div class="logo-box" onclick="resetApp()">ì–´ë–»ê²Œ? ğŸš®</div>
        </header>

        <div class="content-area" id="main-content">
            
            <div class="upload-zone" id="upload-zone" onclick="triggerUpload()">
                <div style="font-size: 4rem;">ğŸ“·</div>
                <div class="upload-text">ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ì“°ë ˆê¸° ì‚¬ì§„ì„ ì˜¬ë ¤ì£¼ì„¸ìš”</div>
            </div>
            <input type="file" id="file-input" accept="image/*" onchange="handleFileSelect(this)">

            <img id="preview-img" src="" alt="ì—…ë¡œë“œëœ ì“°ë ˆê¸°">
            <div id="status-text" style="display: none;"></div>

            <div class="button-group" id="btn-group">
                <button class="action-btn" onclick="showInstruction()">ë¶„ë¦¬ìˆ˜ê±° ë°©ë²•</button>
                <button class="action-btn" onclick="showVideo()">ë¶„ë¦¬ìˆ˜ê±° ì˜ìƒ</button>
            </div>

            <div id="detail-view">
                </div>
        </div>

        <div class="reset-bar" id="reset-bar">
            <div class="reset-btn" onclick="resetApp()">
                ë˜ë‹¤ì‹œ â™¾ï¸
            </div>
        </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
<script>
    // =========================================================
    // [1. í‹°ì²˜ë¸” ë¨¸ì‹  ëª¨ë¸ URL ì„¤ì •]
    const URL = "https://teachablemachine.withgoogle.com/models/zEph8gOIH/";
    // =========================================================

    // [ì½˜í…ì¸  ë§¤í•‘] - ê°ì§€ëœ í•­ëª©ì— ë”°ë¥¸ ë¶„ë¦¬ìˆ˜ê±° ì •ë³´ ë° ì´ë¯¸ì§€/ì˜ìƒ íŒŒì¼ëª… ì •ì˜
    // ì´ë¯¸ì§€ ê²½ë¡œëŠ” 'static' í´ë”ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
    const RECYCLE_GUIDES = {
        "MilkisBottle": {
            category: "í”Œë¼ìŠ¤í‹± (í˜íŠ¸)",
            instruction: [
                { title: "ë‚´ìš©ë¬¼ ë¹„ìš°ê¸°", detail: "ë‚´ìš©ë¬¼ì„ ì™„ì „íˆ ë¹„ìš°ê³  ë¬¼ë¡œ ê¹¨ë—ì´ í—¹ê¶ˆì£¼ì„¸ìš”.", img: "static/HowTo_MilkisBottle_1.jpg" },
                { title: "ë¼ë²¨ ì œê±°", detail: "ìŒë£Œìˆ˜ë³‘ì˜ ë¹„ë‹ ë¼ë²¨(ëšœê»‘ í¬í•¨)ì€ ê¹”ë”í•˜ê²Œ ë–¼ì–´ëƒ…ë‹ˆë‹¤. (ì¼ë°˜ ì“°ë ˆê¸°ë¡œ ë²„ë¦¼)", img: "static/HowTo_MilkisBottle_2.jpg" },
                { title: "ì••ì°© í›„ ëšœê»‘ ë‹«ê¸°", detail: "ë³‘ì˜ ë¶€í”¼ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ìµœëŒ€í•œ ì°Œê·¸ëŸ¬ëœ¨ë¦¬ê³ , ì••ì¶•ëœ ìƒíƒœë¥¼ ìœ ì§€í•˜ë„ë¡ ëšœê»‘ì„ ë‹¤ì‹œ ë‹«ì•„ì¤ë‹ˆë‹¤.", img: "static/HowTo_MilkisBottle_3.jpg" },
                { title: "ë°°ì¶œ", detail: "íˆ¬ëª… í˜íŠ¸ë³‘ ìˆ˜ê±°í•¨ì— ë¶„ë¦¬ ë°°ì¶œí•©ë‹ˆë‹¤.", img: "static/HowTo_MilkisBottle_4.jpg" }
            ],
            // ì‹¤ì œ MilkisBottle ê´€ë ¨ ì˜ìƒì˜ ìœ íŠœë¸Œ embed URLë¡œ êµì²´ í•„ìš”
            video: "https://www.youtube.com/embed/6iQ5QvE7L1Y" 
        },
        "PpuPpuBulgogiflavor": {
            category: "ë¹„ë‹ í¬ì¥ì¬",
            instruction: [
                { title: "ë‚´ìš©ë¬¼ ë¹„ìš°ê¸°", detail: "ê³¼ì ë¶€ìŠ¤ëŸ¬ê¸° ë“± ë‚´ìš©ë¬¼ì„ ìµœëŒ€í•œ í„¸ì–´ëƒ…ë‹ˆë‹¤.", img: "static/HowTo_PpuPpu_1.jpg" },
                { title: "ì„¸ì²™/ì œê±°", detail: "ê¸°ë¦„ê¸°ë‚˜ ì´ë¬¼ì§ˆì´ ìˆë‹¤ë©´ ë¬¼ë¡œ í—¹êµ¬ê±°ë‚˜ ë‹¦ì•„ëƒ…ë‹ˆë‹¤. (ì´ë¬¼ì§ˆ ì œê±°ê°€ ì–´ë ¤ìš°ë©´ ì¢…ëŸ‰ì œ)", img: "static/HowTo_PpuPpu_2.jpg" },
                { title: "ê±´ì¡°", detail: "ë¬¼ê¸°ë¥¼ ì™„ì „íˆ ë§ë ¤ì¤ë‹ˆë‹¤.", img: "static/HowTo_PpuPpu_3.jpg" },
                { title: "ë°°ì¶œ", detail: "ê¹¨ë—í•œ ë¹„ë‹ë¥˜ë§Œ ë”°ë¡œ ëª¨ì•„ ë¹„ë‹ë¥˜ ìˆ˜ê±°í•¨ì— ë°°ì¶œí•©ë‹ˆë‹¤.", img: "static/HowTo_PpuPpu_4.jpg" }
            ],
            video: "https://www.youtube.com/embed/PpuPpu_ID" // ëŒ€ì²´ ì˜ìƒ ID
        }
        // ë‹¤ë¥¸ í´ë˜ìŠ¤ ì´ë¦„ë„ ì—¬ê¸°ì— ì¶”ê°€ ê°€ëŠ¥
    };
    
    // =========================================================

    let model = null; 
    let maxPredictions;
    let loadingInterval = null; 
    let isModelLoading = false; 

    // [2. DOM ì—˜ë¦¬ë¨¼íŠ¸ ë° ìƒíƒœ ë³€ìˆ˜]
    const header = document.getElementById('app-header'); // ID ì¶”ê°€ë¨
    const uploadZone = document.getElementById('upload-zone');
    const fileInput = document.getElementById('file-input');
    const previewImg = document.getElementById('preview-img');
    const statusText = document.getElementById('status-text');
    const btnGroup = document.getElementById('btn-group');
    const detailView = document.getElementById('detail-view');
    const resetBar = document.getElementById('reset-bar');
    const instructionBtn = btnGroup.querySelector('.action-btn:nth-child(1)');
    const videoBtn = btnGroup.querySelector('.action-btn:nth-child(2)');


    let detectedCategory = ""; 
    let detectedSpecific = ""; 
    let currentGuide = null; // í˜„ì¬ ê°ì§€ëœ í’ˆëª©ì˜ ê°€ì´ë“œ ê°ì²´

    function triggerUpload() { 
        if (!model || isModelLoading) {
             alert("AI ëª¨ë¸ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
             return;
        }
        fileInput.click(); 
    }

    // 1-1. AI ëª¨ë¸ ì´ˆê¸°í™”
    async function initAI() {
        if (isModelLoading) return; 
        isModelLoading = true;

        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";
        
        const statusTextElement = document.getElementById('status-text');
        statusTextElement.style.display = 'block';
        statusTextElement.style.fontSize = '2rem';
        statusTextElement.style.color = 'var(--text-gray)';
        statusTextElement.innerHTML = 'AI ëª¨ë¸ì„ ì¤€ë¹„í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤... ğŸŒ';
        
        try {
            await tf.ready();
            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();
            
            statusTextElement.style.display = 'none';
            statusTextElement.style.fontSize = '3rem'; 
        } catch (e) {
            console.error("ëª¨ë¸ ë¡œë”© ì‹¤íŒ¨:", e);
            statusTextElement.innerHTML = 'âš ï¸ AI ëª¨ë¸ ë¡œë”© ì‹¤íŒ¨.';
            statusTextElement.style.color = 'red';
            model = null; 
        } finally {
             isModelLoading = false;
        }
    }

    window.onload = initAI;

    // ì´ë¯¸ì§€ ì„ íƒ ì²˜ë¦¬
    function handleFileSelect(input) {
        if (!model || isModelLoading) {
            alert("AI ëª¨ë¸ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return;
        }

        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                uploadZone.style.display = 'none';
                previewImg.src = e.target.result;
                previewImg.style.display = 'block';
                statusText.style.display = 'block';
                
                header.classList.add('logo-moved'); // ë¡œê³  ì™¼ìª½ ìƒë‹¨ìœ¼ë¡œ ì´ë™ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
                
                previewImg.onload = function() {
                    startDetectionProcess();
                }
                previewImg.onerror = function() {
                    alert("ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                    resetApp();
                }
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    // 3. AI ê°ì§€ ë¡œì§ 
    async function startDetectionProcess() {
        let dots = 0;
        loadingInterval = setInterval(() => {
            dots = (dots % 3) + 1;
            statusText.innerHTML = `ê°ì§€ì¤‘ ${".".repeat(dots)}`;
        }, 300);

        let prediction;
        try {
            prediction = await model.predict(previewImg);
        } catch (e) {
            clearInterval(loadingInterval);
            loadingInterval = null;
            statusText.innerHTML = "âŒ ê°ì§€ ì‹¤íŒ¨: ì´ë¯¸ì§€ ì˜¤ë¥˜ ë˜ëŠ” ëª¨ë¸ ì˜ˆì¸¡ ë¬¸ì œ";
            return;
        }

        let highestProbability = 0;
        let bestClass = "";

        for (let i = 0; i < maxPredictions; i++) {
            if (prediction[i].probability > highestProbability) {
                highestProbability = prediction[i].probability;
                bestClass = prediction[i].className;
            }
        }

        clearInterval(loadingInterval);
        loadingInterval = null;

        const splitName = bestClass.split('_');
        
        // ê°ì§€ëœ Specific í•­ëª© ì„¤ì •
        if (splitName.length >= 2) {
            detectedSpecific = splitName[1]; 
        } else {
            detectedSpecific = bestClass;
        }
        
        // ê°€ì´ë“œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        currentGuide = RECYCLE_GUIDES[detectedSpecific];

        if (!currentGuide) {
             // ë§¤í•‘ëœ ê°€ì´ë“œê°€ ì—†ì„ ê²½ìš°
             detectedCategory = "ì •ë³´ ì—†ìŒ";
             currentGuide = { 
                category: "ì¼ë°˜ì“°ë ˆê¸° ë˜ëŠ” ì •ë³´ ì—†ìŒ",
                instruction: [{ title: "ì •ë³´ ì—†ìŒ", detail: "í•´ë‹¹ í’ˆëª©ì˜ ë¶„ë¦¬ìˆ˜ê±° ë°©ë²•ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¢…ëŸ‰ì œ ë´‰íˆ¬ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.", img: "" }], 
                video: "" 
             };
        }
        detectedCategory = currentGuide.category; // ë§¤í•‘ëœ ì¹´í…Œê³ ë¦¬ë¡œ ì—…ë°ì´íŠ¸
        
        showFirstDetection();
    }

    // 4. ê°ì§€ ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜ë“¤ 

    function showFirstDetection() {
        statusText.innerHTML = `ì•„í•˜ !<br>ì´ ì“°ë ˆê¸°ëŠ” <span class="highlight-text">${detectedCategory}</span>ì´êµ°ìš”!`;
        setTimeout(() => { showSecondDetection(); }, 2000);
    }

    function showSecondDetection() {
        statusText.innerHTML = `ì•„í•˜ !<br>ì´ ì“°ë ˆê¸°ëŠ” <span class="highlight-text">${detectedSpecific}</span>ì´êµ°ìš”!`;
        setTimeout(() => { showComplete(); }, 2000);
    }

    function showComplete() {
        previewImg.style.display = 'none'; 
        statusText.innerHTML = `ê°ì§€ ì™„ë£Œ ! ğŸŒ¿`;
        statusText.style.color = "var(--main-green)"; 
        btnGroup.style.display = 'flex';
        resetBar.style.display = 'flex'; 
        
        // ì™„ë£Œ í›„ ìë™ìœ¼ë¡œ 'ë¶„ë¦¬ìˆ˜ê±° ë°©ë²•' í‘œì‹œ ë° ë²„íŠ¼ í™œì„±í™”
        // showInstruction() í˜¸ì¶œ ì‹œ ë²„íŠ¼ ê·¸ë£¹ì´ ì‚¬ë¼ì§€ì§€ ì•Šë„ë¡ ìˆ˜ì •ë¨
        showInstruction(); 
    }

    // 5. ìƒì„¸ ì •ë³´ í‘œì‹œ í•¨ìˆ˜ë“¤

    function showInstruction() {
        if (!currentGuide) return;
        
        // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
        instructionBtn.classList.add('active');
        videoBtn.classList.remove('active');

        statusText.style.display = 'none'; 
        detailView.style.display = 'flex';
        
        const steps = currentGuide.instruction;

        let stepHtml = '';
        steps.forEach((step, index) => {
            // ì´ë¯¸ì§€ ê²½ë¡œëŠ” static/ í´ë”ë¥¼ ì‚¬ìš©
            stepHtml += `
                <div class="step-box">
                    <div class="step-img" style="background-image: url('${step.img ? step.img : 'placeholder.png'}');">
                        ${!step.img ? 'ì‚¬ì§„ ì¤€ë¹„ì¤‘' : ''}
                    </div>
                    <div class="step-title">${index + 1}. ${step.title}</div>
                    <div>${step.detail}</div>
                </div>
            `;
        });

        // 2x2 ê²©ì ë ˆì´ì•„ì›ƒì„ ìœ„í•œ HTML êµ¬ì¡° ìƒì„±
        detailView.innerHTML = `
            <h2 style="color:var(--main-green); margin-bottom:20px;">ë¶„ë¦¬ìˆ˜ê±° ë°©ë²• (${detectedSpecific})</h2>
            <div class="grid-container">
                ${stepHtml}
            </div>
        `;
    }

    function showVideo() {
        if (!currentGuide) return;

        // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
        instructionBtn.classList.remove('active');
        videoBtn.classList.add('active');

        statusText.style.display = 'none';
        detailView.style.display = 'flex';

        if (currentGuide.video) {
             detailView.innerHTML = `
                <h2 style="color:var(--main-green); margin-bottom:20px;">ë¶„ë¦¬ìˆ˜ê±° ì˜ìƒ (${detectedSpecific})</h2>
                <div class="video-box">
                    <iframe class="video-iframe" 
                        src="${currentGuide.video}" 
                        title="ë¶„ë¦¬ìˆ˜ê±° ê°€ì´ë“œ ì˜ìƒ"
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                </div>
            `;
        } else {
             detailView.innerHTML = `<h2 style="color:red; margin-bottom:20px;">ì˜ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</h2>`;
        }
    }

    // 6. ì´ˆê¸°í™” í•¨ìˆ˜ 

    function resetApp() {
        if (loadingInterval) {
            clearInterval(loadingInterval);
            loadingInterval = null;
        }

        uploadZone.style.display = 'flex';
        fileInput.value = ''; 
        previewImg.style.display = 'none';
        statusText.style.display = 'none';
        statusText.style.color = '#888';
        btnGroup.style.display = 'none';
        detailView.style.display = 'none';
        resetBar.style.display = 'none';
        statusText.innerHTML = '';
        
        // ë¡œê³  ìœ„ì¹˜ ì›ìƒ ë³µêµ¬
        header.classList.remove('logo-moved'); 
        instructionBtn.classList.remove('active');
        videoBtn.classList.remove('active');
        
        detectedCategory = "";
        detectedSpecific = "";
        currentGuide = null;
    }
</script>
</body>
</html>
